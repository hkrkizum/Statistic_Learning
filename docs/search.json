[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Study note",
    "section": "",
    "text": "このページは個人の学習内容をアプトプットする場として、また備忘録として作成しています。"
  },
  {
    "objectID": "index.html#お問い合わせ",
    "href": "index.html#お問い合わせ",
    "title": "Study note",
    "section": "2 お問い合わせ",
    "text": "2 お問い合わせ\n\n下記アドレスまでお送りください\n\nkoizumi.hikaru.ws[at]alumni.tsukuba.ac.jp"
  },
  {
    "objectID": "index.html#免責事項",
    "href": "index.html#免責事項",
    "title": "Study note",
    "section": "3 免責事項",
    "text": "3 免責事項\n\n掲載されている情報には細心の注意を払っていますが、正確である保証はありません。\n掲載されている情報個人の見解であり、所属機関を代表する見解ではありません。\n掲載されている情報を利用することによりあなたに損害が生じても、一切の責任を負いません。\n掲載されている情報は予告なく変更や公開の取り消しする場合があります。"
  },
  {
    "objectID": "R_book_1_Chapt_1.html",
    "href": "R_book_1_Chapt_1.html",
    "title": "第１章",
    "section": "",
    "text": "データハンドリングに有用なパッケージ群を積極的に活用する\n\n\nif(!require(\"pacman\")) {install.packages(\"pacman\")}\n\nLoading required package: pacman\n\npacman::p_load(tidyverse, here, skimr)"
  },
  {
    "objectID": "R_book_1_Chapt_1.html#変量データの扱い方",
    "href": "R_book_1_Chapt_1.html#変量データの扱い方",
    "title": "第１章",
    "section": "2 1変量データの扱い方",
    "text": "2 1変量データの扱い方\n\n2.1 データの読み込み\n\nクリップボードからの読み込み方法：scan(\"Clipboad\")\n再現性担保のためCSVから機械的に読み込む\n\n\n# here(\"Rawdata\", \"R_book_1\") %>% list.files()\n\nmath <- readr::read_csv(here(\"Rawdata\", \"R_book_1\", \"Math&Phys.csv\")) |> \n    dplyr::select(math)\n\nRows: 146 Columns: 2\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (2): math, phys\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nglimpse(math)\n\nRows: 146\nColumns: 1\n$ math <dbl> 90, 65, 60, 75, 50, 60, 25, 35, 85, 100, 45, 95, 80, 80, 95, 55, …\n\n\n\n\n2.2 ヒストグラムの描写\n\nbin: 階級\nbin width: 階級の幅\nNumber of bin: 階級の数\nfrequency: 度数、階級に当てはまるデータの個数\nrelative frequency: 全体を１とした場合の割合を示したもの\ngeom_histogramでは相対度数の表現方法が見つからなかったので、マニュアルで計算した\nhist()はデフォルトで左半開区間: a < x \\leqq b\n\n(a, b]とも表記する\n\n\n\nmath |> \n    ggplot(aes(x = math)) +\n    geom_histogram(binwidth = 10)\n\n\n\nmath |>  \n    dplyr::mutate(math_bin = cut_width(math, width = 10)) |> \n    dplyr::group_by(math_bin) |> \n    dplyr::summarise(n = n(), .groups = \"drop\") |> \n    dplyr::mutate(n_p = n/sum(n)) |> \n    dplyr::arrange(math_bin) |> \n    ggplot(aes(x = math_bin,\n               y = n_p)) +\n    geom_bar(stat = \"identity\", width = 1)\n\n\n\n\n\n\n2.3 1変数の要約\n\n2.3.1 平均値\n\n2.3.1.1 算術平均 (arithmetic mean)\n\\bar{x} = \\frac{1}{n}\\sum^{n}_{j=1}x_j\n\nmean(math$math)\n\n[1] 61.60959\n\n\n\n\n2.3.1.2 幾何平均 (Geometric mean)\n\n増加率の平均など\n\nx_G = \\sqrt[n]{x_1x_2x_3 \\cdots x_n}\n\nprod(math$math)^(1/length(math$math))\n\n[1] 56.42068\n\n\n\n\n2.3.1.3 調和平均 (harmonic mean)\n\n速度の平均など\n\n\\frac{1}{x_H} = \\frac{1}{n}\\sum^{n}_{j=1}\\frac{1}{x_j}\n\nv <- c(60, 20)\n1/mean(1/v)\n\n[1] 30\n\n\n\n\n\n2.3.2 分散\n\\sigma^2=\\frac{1}{n}\\sum^{n}_{j=1}(x_j - \\bar{x})^2\n\n\n2.3.3 不偏分散\n\nチルダ(~)は不偏推定量を意味する\nハット(^)は推定量を意味する\n\n\\tilde{\\sigma^2}=\\frac{1}{n-1}\\sum^{n}_{j=1}(x_j - \\bar{x})^2\n\n\n2.3.4 標準偏差\n\n分散の平方根\n\n\\sigma=\\sqrt{\\frac{1}{n}\\sum^{n}_{j=1}(x_j - \\bar{x})^2}\n\n不偏分散を用いて求めることのほうが多い\n\n\\sigma=\\sqrt{\\frac{1}{n-1}\\sum^{n}_{j=1}(x_j - \\bar{x})^2}\n\n# 不偏分散\nvar(math$math)\n\n[1] 506.5293\n\n# 確認する\nepsilon_squad <- \n    math |> \n    dplyr::mutate(epsilon = math - mean(math)) |> \n    dplyr::mutate(epsilon_squad = epsilon^2) |> \n    dplyr::pull(epsilon_squad) \n\nsum(epsilon_squad)/(length(epsilon_squad)-1)\n\n[1] 506.5293\n\n# 標準偏差\nsd(math$math)\n\n[1] 22.50621\n\n\n\n\n\n2.4 階級数の決め方\n\nスタージェスの公式 (Sturges’ rule)\n\n\\lceilおよび\\rceilは天井関数を示す\n\\lceil x \\rceilはxの小数点を切り上げた整数\n\n\n\nk = \\lceil1+\\log_2n \\rceil\n\n\n# mathデータの場合\n1+log(length(math$math), base = 2)\n\n[1] 8.189825\n\nceiling(1+log(length(math$math), base = 2)) \n\n[1] 9\n\n\n\nRにはその他にも、スコットの選択法 (Scott’s choice)、フリードマン=ダイアコニスの選択法 (Freedman-Diaconis’ choice) が用意されている\n\n\n\n2.5 グラフの保存方法\n\n省略\n\n\n\n2.6 分位点と箱ひげ図\n\n中央値 (Median):データを大きさの順に並べた際の真ん中の値\n\n偶数の場合は真ん中２つの平均値\n\n\n\nmedian(c(56, 78, 81, 90))\n\n[1] 79.5\n\n\n\n第一四分位点・第三四分位点: 小さい方から25%、75％の値\n四分位偏差 (IQR: inter-quantile range): Q3-Q1、メディアン付近にどの程度データが集まっているかを示す\n\n\n2.6.1 箱ひげ図の解釈\n\nmath |> \n    dplyr::summarise(across(.cols = math, \n                            .names = \"{.fn}\",\n                            .fns = list(mean = mean,\n                                        min = min,\n                                        max = max,\n                                        Q1 = ~quantile(.x, 0.25),\n                                        Q3 = ~quantile(.x, 0.75)\n                            ))) |> \n    dplyr::mutate(UpperLim = Q3 + (Q3-Q1)*1.5,\n                  LowerLim = Q1 - (Q3-Q1)*1.5)\n\n# A tibble: 1 × 7\n   mean   min   max    Q1    Q3 UpperLim LowerLim\n  <dbl> <dbl> <dbl> <dbl> <dbl>    <dbl>    <dbl>\n1  61.6    10   100    45    80     132.     -7.5\n\nmath |> \n    ggplot(aes(x = \"\", y = math)) +\n    geom_boxplot() +\n    scale_x_discrete(name = \"\")\n\n\n\n\n\nひげの最上位はQ3+1.5\\times IQR、最下位はQ1-1.5\\times IQR、データがその範囲にない場合はそれぞれ最大値、最小値が入る\n\nそのため、ひげの長さが上下で均等にならない場合がある\n\n箱ひげ図の書き方には複数流儀がある\n\n例：高校の数学の教科書では最大値・最小値が入るとしている\n\n\n\n\n\n2.7 外れ値\n\nBoxplotのひげの外にある点、定義は様々\n平均値は外れ値に敏感に反応し、中央値は頑強 (robust) である\n\n\niris |> \n    tidyr::pivot_longer(cols = -Species,\n                        names_to = \"param\",\n                        values_to = \"val\") |> \n    dplyr::filter(!param %in% c(\"Petal.Width\")) |> \n    dplyr::mutate(param = fct_relevel(param, \"Sepal.Length\", \"Sepal.Width\")) |> \n    ggplot(aes(x = param,\n               y = val)) +\n    geom_boxplot()\n\n\n\n\n\n\n2.8 最頻値\n\nmath |> \n    dplyr::pull(math) |> \n    table() |> \n    which.max() |> \n    names()\n\n[1] \"60\"\n\n\n\n\n2.9 欠損値\n\nRではNA (Not Available) という記号で表現される\nNAに対する四則演算、論理演算はすべてNAで返される\n\n\n# here(\"Rawdata\", \"R_book_1\") %>% list.files()\n\nmath_na <- readr::read_csv(here(\"Rawdata\", \"R_book_1\", \"Not Available.csv\")) |> \n    dplyr::pull(1)\n\nRows: 146 Columns: 1\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (1): math_na\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nskimr::skim(math_na)\n\n\nData summary\n\n\nName\nmath_na\n\n\nNumber of rows\n146\n\n\nNumber of columns\n1\n\n\n_______________________\n\n\n\nColumn type frequency:\n\n\n\nnumeric\n1\n\n\n________________________\n\n\n\nGroup variables\nNone\n\n\n\nVariable type: numeric\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmean\nsd\np0\np25\np50\np75\np100\nhist\n\n\n\n\ndata\n0\n1\n61.61\n22.51\n10\n45\n65\n80\n100\n▂▅▆▇▆\n\n\n\n\nmath_na2 <- c(NA, math_na)\nmean(math_na2)\n\n[1] NA\n\nmean(math_na2, na.rm = TRUE)\n\n[1] 61.60959"
  },
  {
    "objectID": "R_book_1_Chapt_1.html#章末問題",
    "href": "R_book_1_Chapt_1.html#章末問題",
    "title": "第１章",
    "section": "3 章末問題",
    "text": "3 章末問題\n\n3.1 1-1\n以下より男性の方がばらつきが小さい\n\n# 男性\n5.63/171.58*100\n\n[1] 3.281268\n\n# 女性\n5.56/158.23*100\n\n[1] 3.513872\n\n\n\n\n3.2 1-2\n\nv <- c(2,5,11,7,9)\n\n# 平均\nmean(v)\n\n[1] 6.8\n\n#　幾何平均\nprod(v)^(1/length(v))\n\n[1] 5.863361\n\n# 調和平均\n1/mean(1/v)\n\n[1] 4.785251\n\n# 不偏分散\nvar(v)\n\n[1] 12.2\n\n# 不偏分散の平方根\nsqrt(var(v))\n\n[1] 3.49285\n\n\n\n\n3.3 1-3\n\nv <- c(34,56,32,15,49)\n\n# 平均偏差\nabs(v - mean(v)) |> sum()/length(v)\n\n[1] 12.24\n\n# 標準偏差\nsd(v)\n\n[1] 15.99062\n\n\n\n\n3.4 1-4\n\nscore <- c(65, 59, 62)\nnum <- c(500, 750, 690)\n\nsum(score*num)/sum(num)\n\n[1] 61.6134\n\n\n\n\n3.5 1-5\n\nheight <- c(171.8, 167.2, 180.9)\nweight <- c(74.4,  56.3,  93.2)\n\nweight/((height/100)^2)\n\n[1] 25.20732 20.13890 28.47992\n\n\n\n\n3.6 1-6\n\nv <- c(3,4,8,11,7)\n\n# 不偏分散の平方根≒不偏標準偏差\nvar(v) |> sqrt()\n\n[1] 3.209361\n\n# 標準偏差\nsqrt( var(v)*(length(v)-1) / length(v) )\n\n[1] 2.87054\n\n\n\n\n3.7 1-7\n\nsigma <- sd(math$math)\nmu <- mean(math$math)\n\n# 40\n50+((40-mu)/sigma)*10\n\n[1] 40.39839\n\n# 85\n50+((85-mu)/sigma)*10\n\n[1] 60.39287\n\n\n\n\n3.8 1-8\n\nset.seed(54147)\n\nx <- rnorm(n = 100, mean = 50, sd = 10)\n1+log(length(x), base = 2)\n\n[1] 7.643856\n\nggplot(data = NULL,\n       aes(x = x)) +\n    geom_histogram(bins = 11)\n\n\n\nhist(x)\n\n\n\n\n\n\n3.9 1-9\n\nset.seed(54147)\n\nx <- rnorm(n = 100, mean = 50, sd = 5)\ny <- rnorm(n = 100, mean = 10, sd = 10)\n\ntibble(x = x,\n       y = y) |> \n    tidyr::pivot_longer(cols = everything(),\n                        names_to = \"param\",\n                        values_to = \"val\") |> \n    ggplot(aes(x = param, y = val)) +\n    geom_boxplot()\n\n\n\ntibble(x = x,\n       y = y) |> \n    tidyr::pivot_longer(cols = everything(),\n                        names_to = \"param\",\n                        values_to = \"val\") |> \n    dplyr::group_by(param) |> \n    dplyr::summarise(across(.cols = val, \n                            .fns = list(Q1 = ~quantile(.x, 0.25),\n                                        Q3 = ~quantile(.x, 0.75)),\n                            .names = \"{.fn}\")) |> \n    dplyr::mutate(IQR = Q3 - Q1)\n\n# A tibble: 2 × 4\n  param    Q1    Q3   IQR\n  <chr> <dbl> <dbl> <dbl>\n1 x     46.0   53.7  7.72\n2 y      1.81  17.4 15.5 \n\n\n\n\n3.10 1-10\n\nx <- rnorm(n = 5, mean = 170, sd = 10)\ny <- c(500, x)\n\nstr_c(\"mean: \",\n      mean(y) |> round(digits = 1),\n      \", median: \",\n      median(y)|> round(digits = 1)\n      )\n\n[1] \"mean: 225.6, median: 173.5\"\n\n\n\n\n3.11 1-11\n\nstr_c(\"x, mad: \", \n      mad(x) |> round(digits = 1),\n      \", sd: \",\n      sd(x) |> round(digits = 1))\n\n[1] \"x, mad: 3.1, sd: 5.6\"\n\nstr_c(\"y, mad: \", \n      mad(y) |> round(digits = 1),\n      \", sd: \",\n      sd(y) |> round(digits = 1))\n\n[1] \"y, mad: 3.7, sd: 134.5\"\n\n\n\n\n3.12 1-12\n\n# skweness\nmean( scale(math$math, center = TRUE, scale = TRUE)^3 )\n\n[1] -0.2721035\n\n# mean( scale(rnorm(n = 50000, mean = 0, sd = 1), center = TRUE, scale = TRUE)^3 )\n\n# kurtosis\nmean( scale(math$math, center = TRUE, scale = TRUE)^4)-3\n\n[1] -0.8259503\n\n# mean( scale(rnorm(n = 500, mean = 0, sd = 1), center = TRUE, scale = TRUE)^4)-3\n\n\n\n3.13 1-13\n\n数式を展開する\n\n平均値の２乗の平均がトリッキー\n\n\n\\begin{equation}\n\\begin{split}\n\\sigma^2 &= \\frac{1}{n}\\sum^n_{j = 1}(x_j - \\bar{x})^2 \\\\\n     &= \\frac{1}{n}\\sum^n_{j = 1}x_j^2 - 2\\bar{x} \\frac{1}{n}\\sum^n_{j = 1} x_j +       \\frac{1}{n}\\sum^n_{j = 1}\\bar{x}^2 \\\\\n     &= \\bar{x_j^2} - 2\\bar{x}^2 + \\bar{x}^2\\\\\n     &= \\bar{x_j^2} - \\bar{x}^2\n\\end{split}\n\\end{equation}\n\n\n3.14 1-14\n展開する\n\\begin{equation}\\begin{split}\nf(a) &= \\sum^n_{j=1}(x_j - a)^2 \\\\\n     &= \\sum^n_{j=1}x_j^2 - \\sum^n_{j=1}2ax_j + \\sum^n_{j=1}a^2\n\\end{split}\\end{equation}\naの下凸な２次関数であるから、導関数=0となるようにすればよい\n\\begin{equation}\\begin{split}\nf'(a) &= -\\sum^n_{j=1}2x_j + \\sum^n_{j=1}2a \\\\\n      &= 2\\sum^n_{j=1}a - x_j\n\\end{split}\\end{equation}\n\\begin{equation}\\begin{split}\n2\\sum^n_{j=1}a - x_j &= 0 \\\\\n                2na  &= 2\\sum^n_{j=1}x_j \\\\\n                  a  &= \\frac{1}{n}\\sum^n_{j=1}x_j\n\\end{split}\\end{equation}\nよって、平均値は残差平方和を最小とする"
  },
  {
    "objectID": "R_book_1_Chapt_2.html",
    "href": "R_book_1_Chapt_2.html",
    "title": "第２章",
    "section": "",
    "text": "データハンドリングに有用なパッケージ群を積極的に活用する\n\n\nif(!require(\"pacman\")) {install.packages(\"pacman\")}\n\nLoading required package: pacman\n\npacman::p_load(tidyverse, here, skimr, patchwork)"
  },
  {
    "objectID": "R_book_1_Chapt_2.html#散布図",
    "href": "R_book_1_Chapt_2.html#散布図",
    "title": "第２章",
    "section": "2 散布図",
    "text": "2 散布図\n\nphysのスコアを取り出す\n\n\nscore <- readr::read_csv(here(\"Rawdata\", \"R_book_1\", \"Math&Phys.csv\")) \n\nRows: 146 Columns: 2\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (2): math, phys\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nglimpse(score)\n\nRows: 146\nColumns: 2\n$ math <dbl> 90, 65, 60, 75, 50, 60, 25, 35, 85, 100, 45, 95, 80, 80, 95, 55, …\n$ phys <dbl> 80, 65, 55, 65, 75, 75, 20, 20, 70, 75, 30, 50, 35, 70, 100, 40, …\n\n# hist(score$phys)\ng1 <- \n    ggplot(data = score,\n       aes(x = phys)) +\n    geom_histogram(bins = 10)\n\ng2 <- \n    ggplot(data = score,\n       aes(x = math,\n           y = phys)) +\n    geom_point()\n\ng1 + g2"
  },
  {
    "objectID": "R_book_1_Chapt_2.html#相関関係",
    "href": "R_book_1_Chapt_2.html#相関関係",
    "title": "第２章",
    "section": "3 相関関係",
    "text": "3 相関関係\n\n-1から1までの間の値を取る\n\n1に近い場合：正の相関がある\n-1に近い場合：負の相関がある\n0に近い場合：相関がない\n\n\n\ncor(score$math, score$phys)\n\n[1] 0.6191588\n\n\n\n3.1 ピアソンの積率相関係数\n\nPearson’s product-moment correlation coefficient\n\n\nr=r_{xy}=\n\\frac{\\sum^n_{j=1}(x_j-\\bar{x})(yj-\\bar{y})}\n{ \\sqrt{\\sum^n_{j=1}(x_j-\\bar{x})^2} \\sqrt{\\sum^n_{j=1}(y_j-\\bar{y})^2} }\n\n\nr_{xy}は平均偏差ベクトル \nx= (x_1 - \\bar{x}, x_2 - \\bar{x}, x_3 - \\bar{x},\\cdots x_n - \\bar{x}) \\\\\ny= (y_1 - \\bar{y}, y_2 - \\bar{y}, y_3 - \\bar{y},\\cdots y_n - \\bar{y})\n\n\nのなす角\\thetaの余弦\\cos\\thetaに一致する\n\n3.1.1 平均偏差ベクトルと相関係数"
  }
]